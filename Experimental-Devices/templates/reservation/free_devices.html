{% include 'partials/banner.html' %}
{% load static %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/free_devices.css' %}"> <!-- Link to the CSS file -->

    <h2>Available Free Devices</h2>

    {% if free_devices %}
        <table>
            <thead>
                <tr>
                    <th>Device Type</th>
                    <th>Serial Number</th>
                    <th>Description</th>
                    <th>Location</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for device in free_devices %}
                    <tr>
                        <td>
                            {{ device.get_device_type }}
                        </td>
                        <td>
                            {{ device.serial_number }}
                        </td>
                        <td>
                            {% if device.description %}
                                {{ device.description }}
                            {% else %}
                                <span class="no-content">No current description</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if device.location %}
                                {{ device.location }}
                            {% else %}
                                <span class="no-content">No location listed</span>
                            {% endif %}
                        </td>
                        <td>
                            <form method="post" action="{% url 'reserve_device' device.serial_number %}" style="display:inline;">
                                {% csrf_token %}
                                <button type="submit">Reserve Now</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Sorry, no devices available!<br><br><a href="{% url 'waitlist' %}">Click here to be added to the waitlist!</a></p>
    {% endif %}
{% endblock %}
